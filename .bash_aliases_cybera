# App aliases
alias megacli='/root/bin/Linux/opt/MegaRAID/MegaCli/MegaCli64'

# OpenStack aliases
alias rnova="for i in api conductor consoleauth novncproxy scheduler; do service nova-\$i restart; done; service apache2 restart;"
alias rswift="for i in account-auditor account account-reaper account-replicator container-auditor container container-replicator container-updater object-auditor object object-replicator object-updater; do service swift-\$i restart; done"
alias rcinder="for i in scheduler ; do service cinder-\$i restart; done; service apache2 restart"
alias rglance="for i in api registry; do service glance-\$i restart; done"
alias rdesignate="for i in api agent central mdns pool-manager sink; do service designate-\$i restart; done"
alias rneutron="for i in dhcp-agent l3-agent linuxbridge-agent metadata-agent server; do service neutron-\$i restart; done"
alias st2_lookup="st2 run rac.project_artifacts"

function oscurl() {
  token=$(openstack token issue -c id -f value)
  curl -s -H "X-Auth-Token:$token" $1
}

function forgetnode { puppet cert clean $1; puppet node deactivate $1; puppet node clean $1; }
function forgetnode6 { puppetserver ca clean --certname $1; puppet node deactivate $1; puppet node clean $1; }
PATH=$PATH:/root/novac/bin

function newsshhost {
  ssh-keygen -f ~/.ssh/known_hosts -R $1
  ip=$(grep $1 /etc/hosts | awk '{print $1}')
  if [[ -n $ip ]]; then
    ssh-keygen -f ~/.ssh/known_hosts -R $ip
  fi
  ip=$(dig -t a +short $1)
  if [[ -n $ip ]]; then
    ssh-keygen -f ~/.ssh/known_hosts -R $ip
  fi
  ip=$(dig -t aaaa +short $1)
  if [[ -n $ip ]]; then
    ssh-keygen -f ~/.ssh/known_hosts -R $ip
  fi
  ssh-keyscan -t ecdsa $1 >> ~/.ssh/known_hosts
}

export EDITOR=/usr/bin/vim

# Path tweaks for Puppet 6
export PATH=$PATH:/opt/puppetlabs/bin

# Ignore duplicate history entries
HISTCONTROL=ignoreboth

# LXC aliases
alias lls="lxc ls"
function la() {
  lxc exec $1 bash
}

